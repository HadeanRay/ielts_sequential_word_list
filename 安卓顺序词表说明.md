# 安卓顺序词表应用 - 软件架构设计

## 1. 应用概述

本应用是一个基于Android平台的雅思顺序词表学习工具，通过可视化的状态管理帮助用户记录和追踪单词学习进度。

## 2. 技术架构

### 2.1 平台要求
- **最低SDK版本**: API Level 21 (Android 5.0)
- **目标SDK版本**: API Level 33 (Android 13)
- **架构模式**: MVVM (Model-View-ViewModel)

### 2.2 核心技术栈
- **UI框架**: Android原生控件 + RecyclerView (虚拟滚动)
- **数据存储**: SharedPreferences (状态持久化)
- **文件处理**: Apache POI (Excel文件读取)
- **架构组件**: ViewModel, LiveData, DataBinding

## 3. 界面设计

### 3.1 整体布局
采用**双栏布局**设计：
- **左侧导航栏**: 固定宽度20px，用于快速导航
- **右侧内容区**: 可滚动的词表显示区域

### 3.2 左侧导航栏
- **宽度**: 20px
- **功能**: 首字母快速导航
- **交互**: 点击跳转到对应首字母的单词位置
- **实现**: 可使用固定定位的垂直字母列表

### 3.3 右侧词表区域
- **容器**: RecyclerView (支持虚拟滚动)
- **背景**: 透明
- **布局**: 垂直线性布局
- **行高**: 动态计算，确保内容完整显示

### 3.4 单词项组件设计
每个单词项包含三个主要元素：

#### 3.4.1 单词显示区
- **位置**: 左侧
- **控件**: TextView
- **内容**: 当前单词原文
- **样式**: 16sp，中等字重

#### 3.4.2 中文释义区
- **位置**: 中间
- **控件**: TextView
- **内容**: 单词的中文意思
- **显示逻辑**: 仅在状态不为默认(灰色)时显示
- **样式**: 14sp，浅灰色

#### 3.4.3 状态指示器
- **位置**: 右侧
- **控件**: 自定义圆形视图
- **状态颜色**:
  - 默认状态: 灰色 (#9E9E9E)
  - 简单: 绿色 (#4CAF50)
  - 犹豫: 黄色 (#FFEB3B)
  - 困难: 红色 (#F44336)
- **大小**: 16dp直径

### 3.5 中心突出显示
- **检测范围**: 屏幕垂直中心区域 (±100dp)
- **高亮效果**: 背景阴影或边框加粗
- **状态关联**: 仅对中心区域单词的状态指示器生效

### 3.6 底部操作按钮
- **位置**: 页面最下方，悬浮显示
- **布局**: 水平排列，三个等宽按钮
- **高度**: 48dp
- **间距**: 8dp边距

#### 3.6.1 按钮功能
- **左侧按钮** (绿色): 将中心单词状态设置为"简单"
- **中间按钮** (黄色): 将中心单词状态设置为"犹豫"
- **右侧按钮** (红色): 将中心单词状态设置为"困难"

## 4. 数据管理

### 4.1 数据源
- **文件路径**: `assets/words/ielts.xls`
- **文件格式**: Microsoft Excel (.xls)
- **数据结构**: 
  - 第一列: 英文单词
  - 第二列: 中文释义
  - 按字母顺序排序

### 4.2 数据模型
```kotlin
data class WordItem(
    val english: String,
    val chinese: String,
    var status: WordStatus = WordStatus.DEFAULT
)

enum class WordStatus(val color: Int, val displayChinese: Boolean) {
    DEFAULT(R.color.gray, false),
    EASY(R.color.green, true),
    HESITANT(R.color.yellow, true),
    DIFFICULT(R.color.red, true)
}
```

### 4.3 状态持久化
- **存储位置**: SharedPreferences
- **存储内容**: 
  - 当前滚动位置
  - 每个单词的学习状态
- **恢复机制**: 应用启动时自动恢复上次使用状态

## 5. 用户交互流程

### 5.1 应用启动流程
1. 读取Excel文件数据
2. 从SharedPreferences恢复用户状态
3. 恢复上次滚动位置
4. 渲染词表界面

### 5.2 滚动交互
1. 用户滚动词表
2. 检测中心区域单词
3. 更新高亮显示
4. 更新底部按钮状态

### 5.3 状态更新流程
1. 用户点击底部按钮
2. 获取当前中心单词
3. 更新单词状态
4. 保存到SharedPreferences
5. 刷新界面显示

### 5.4 快速导航
1. 用户点击左侧导航字母
2. 计算目标单词在列表中的位置
3. 平滑滚动到目标位置
4. 更新中心区域高亮

## 6. 性能优化

### 6.1 虚拟滚动
- 使用RecyclerView的LinearLayoutManager
- 设置itemViewType优化不同状态显示
- 实现ViewHolder复用机制

### 6.2 内存管理
- 延迟加载中文释义
- 状态变更时局部刷新
- 合理使用ViewModel作用域

### 6.3 数据预加载
- 预读取部分单词数据
- 智能缓存机制
- 后台状态同步

## 7. 错误处理

### 7.1 文件读取异常
- 检测文件是否存在
- 处理格式错误的Excel文件
- 提供默认数据集作为备选

### 7.2 状态恢复失败
- 检测存储数据完整性
- 重置为默认状态
- 记录错误日志